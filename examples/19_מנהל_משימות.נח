# ╔══════════════════════════════════════════════════════════════╗
# ║  דוגמה 19: מנהל משימות - יישום מלא                           ║
# ║  Example 19: Task Manager - Full Application                 ║
# ╚══════════════════════════════════════════════════════════════╝

# ===== מחלקת משימה =====
מחלקה משימה:
    """מייצגת משימה בודדת"""
    
    הגדר __אתחל__(עצמי, מזהה, כותרת, עדיפות):
        עצמי.מזהה = מזהה
        עצמי.כותרת = כותרת
        עצמי.עדיפות = עדיפות  # 1=גבוהה, 2=בינונית, 3=נמוכה
        עצמי.הושלמה = שקר
        עצמי.תגיות = []
    
    הגדר סמן_כהושלמה(עצמי):
        עצמי.הושלמה = אמת
    
    הגדר הוסף_תגית(עצמי, תגית):
        עצמי.תגיות = עצמי.תגיות + [תגית]
    
    הגדר קבל_אייקון_עדיפות(עצמי):
        אם עצמי.עדיפות == 1:
            החזר "🔴"
        אחרת_אם עצמי.עדיפות == 2:
            החזר "🟡"
        אחרת:
            החזר "🟢"
    
    הגדר __מחרוזת__(עצמי):
        סטטוס = "✅" אם עצמי.הושלמה אחרת "⬜"
        עדיפות_אייקון = עצמי.קבל_אייקון_עדיפות()
        טקסט = סטטוס + " " + עדיפות_אייקון + " [" + מחרוזת(עצמי.מזהה) + "] " + עצמי.כותרת
        אם אורך(עצמי.תגיות) > 0:
            טקסט = טקסט + " 🏷️ " + מחרוזת(עצמי.תגיות)
        החזר טקסט

# ===== מחלקת מנהל משימות =====
מחלקה מנהל_משימות:
    """מנהל רשימת משימות"""
    
    הגדר __אתחל__(עצמי):
        עצמי.משימות = []
        עצמי.מונה_מזהים = 0
    
    הגדר הוסף_משימה(עצמי, כותרת, עדיפות):
        עצמי.מונה_מזהים = עצמי.מונה_מזהים + 1
        משימה_חדשה = משימה(עצמי.מונה_מזהים, כותרת, עדיפות)
        עצמי.משימות = עצמי.משימות + [משימה_חדשה]
        הדפס("✨ נוספה משימה: " + כותרת)
        החזר משימה_חדשה
    
    הגדר מצא_משימה(עצמי, מזהה):
        עבור מ בתוך עצמי.משימות:
            אם מ.מזהה == מזהה:
                החזר מ
        החזר ריק
    
    הגדר סמן_הושלמה(עצמי, מזהה):
        משימה = עצמי.מצא_משימה(מזהה)
        אם משימה != ריק:
            משימה.סמן_כהושלמה()
            הדפס("✅ משימה " + מחרוזת(מזהה) + " הושלמה!")
        אחרת:
            הדפס("❌ משימה לא נמצאה")
    
    הגדר הצג_כל_המשימות(עצמי):
        הדפס("\n📋 כל המשימות:")
        הדפס("─" * 50)
        אם אורך(עצמי.משימות) == 0:
            הדפס("  (אין משימות)")
        אחרת:
            עבור מ בתוך עצמי.משימות:
                הדפס("  " + מחרוזת(מ))
        הדפס("─" * 50)
    
    הגדר הצג_משימות_פתוחות(עצמי):
        הדפס("\n📌 משימות פתוחות:")
        הדפס("─" * 50)
        יש_פתוחות = שקר
        עבור מ בתוך עצמי.משימות:
            אם לא מ.הושלמה:
                הדפס("  " + מחרוזת(מ))
                יש_פתוחות = אמת
        אם לא יש_פתוחות:
            הדפס("  🎉 כל המשימות הושלמו!")
        הדפס("─" * 50)
    
    הגדר הצג_לפי_עדיפות(עצמי, עדיפות):
        שמות_עדיפות = {1: "גבוהה 🔴", 2: "בינונית 🟡", 3: "נמוכה 🟢"}
        הדפס("\n🎯 משימות בעדיפות " + שמות_עדיפות[עדיפות] + ":")
        הדפס("─" * 50)
        נמצאו = שקר
        עבור מ בתוך עצמי.משימות:
            אם מ.עדיפות == עדיפות וגם לא מ.הושלמה:
                הדפס("  " + מחרוזת(מ))
                נמצאו = אמת
        אם לא נמצאו:
            הדפס("  (אין משימות בעדיפות זו)")
        הדפס("─" * 50)
    
    הגדר סטטיסטיקה(עצמי):
        סה_כ = אורך(עצמי.משימות)
        הושלמו = 0
        עבור מ בתוך עצמי.משימות:
            אם מ.הושלמה:
                הושלמו = הושלמו + 1
        פתוחות = סה_כ - הושלמו
        
        הדפס("\n📊 סטטיסטיקות:")
        הדפס("═" * 30)
        הדפס("  סה\"כ משימות: " + מחרוזת(סה_כ))
        הדפס("  הושלמו: " + מחרוזת(הושלמו) + " ✅")
        הדפס("  פתוחות: " + מחרוזת(פתוחות) + " ⬜")
        
        אם סה_כ > 0:
            אחוז = (הושלמו * 100) / סה_כ
            מלא = מספר_שלם(אחוז / 10)
            ריקים = 10 - מלא
            סרגל = "█" * מלא + "░" * ריקים
            הדפס("  התקדמות: [" + סרגל + "] " + מחרוזת(מספר_שלם(אחוז)) + "%")
        הדפס("═" * 30)

# ===== הדגמת השימוש =====
הדפס("╔════════════════════════════════════════╗")
הדפס("║       📝 מנהל המשימות של נחשון        ║")
הדפס("╚════════════════════════════════════════╝")

# יצירת מנהל
מנהל = מנהל_משימות()

# הוספת משימות
הדפס("\n🆕 הוספת משימות...")
מ1 = מנהל.הוסף_משימה("ללמוד נחשון", 1)
מ2 = מנהל.הוסף_משימה("לכתוב קוד לדוגמה", 1)
מ3 = מנהל.הוסף_משימה("לקרוא תיעוד", 2)
מ4 = מנהל.הוסף_משימה("לענות על מיילים", 2)
מ5 = מנהל.הוסף_משימה("לארגן קבצים", 3)
מ6 = מנהל.הוסף_משימה("לגבות מחשב", 3)

# הוספת תגיות
מ1.הוסף_תגית("לימודים")
מ1.הוסף_תגית("תכנות")
מ2.הוסף_תגית("תכנות")
מ3.הוסף_תגית("לימודים")

# הצגת כל המשימות
מנהל.הצג_כל_המשימות()

# סימון משימות כהושלמו
הדפס("\n✏️ עדכון משימות...")
מנהל.סמן_הושלמה(1)
מנהל.סמן_הושלמה(3)

# הצגת משימות פתוחות
מנהל.הצג_משימות_פתוחות()

# הצגת לפי עדיפות
מנהל.הצג_לפי_עדיפות(1)

# הצגת סטטיסטיקה
מנהל.סטטיסטיקה()

הדפס("\n👋 תודה שהשתמשת במנהל המשימות!")

