# ╔══════════════════════════════════════════════════════════════╗
# ║  דוגמה 11: מחלקות ותכנות מונחה עצמים                         ║
# ║  Example 11: Classes and Object-Oriented Programming         ║
# ╚══════════════════════════════════════════════════════════════╝

# ===== מחלקה בסיסית =====
מחלקה נקודה:
    """מייצגת נקודה במישור דו-מימדי"""
    
    הגדר __אתחל__(עצמי, איקס, איגרק):
        עצמי.איקס = איקס
        עצמי.איגרק = איגרק
    
    הגדר __מחרוזת__(עצמי):
        החזר "(" + מחרוזת(עצמי.איקס) + ", " + מחרוזת(עצמי.איגרק) + ")"
    
    הגדר מרחק_מהראשית(עצמי):
        החזר שורש(עצמי.איקס ** 2 + עצמי.איגרק ** 2)
    
    הגדר הזז(עצמי, ד_איקס, ד_איגרק):
        עצמי.איקס = עצמי.איקס + ד_איקס
        עצמי.איגרק = עצמי.איגרק + ד_איגרק

# יצירת נקודות
נ1 = נקודה(3, 4)
הדפס("נקודה: " + מחרוזת(נ1))
הדפס("מרחק מהראשית: " + מחרוזת(נ1.מרחק_מהראשית()))

# ===== מחלקה עם ירושה =====
מחלקה חיה:
    """מחלקת בסיס לכל החיות"""
    
    הגדר __אתחל__(עצמי, שם, גיל):
        עצמי.שם = שם
        עצמי.גיל = גיל
        עצמי.חי = אמת
    
    הגדר השמע_קול(עצמי):
        הדפס(עצמי.שם + " משמיע קול")
    
    הגדר מידע(עצמי):
        החזר עצמי.שם + " (גיל: " + מחרוזת(עצמי.גיל) + ")"

# ===== ירושה - כלב =====
מחלקה כלב(חיה):
    """כלב - יורש מחיה"""
    
    הגדר __אתחל__(עצמי, שם, גיל, גזע):
        עצמי.שם = שם
        עצמי.גיל = גיל
        עצמי.גזע = גזע
        עצמי.חי = אמת
    
    הגדר השמע_קול(עצמי):
        הדפס(עצמי.שם + " נובח: הב הב! ��")
    
    הגדר הבא(עצמי):
        הדפס(עצמי.שם + " מביא את הכדור!")
    
    הגדר מידע(עצמי):
        החזר "🐕 " + עצמי.שם + " (" + עצמי.גזע + ", גיל: " + מחרוזת(עצמי.גיל) + ")"

# ===== ירושה - חתול =====
מחלקה חתול(חיה):
    """חתול - יורש מחיה"""
    
    הגדר __אתחל__(עצמי, שם, גיל, צבע):
        עצמי.שם = שם
        עצמי.גיל = גיל
        עצמי.צבע = צבע
        עצמי.חי = אמת
    
    הגדר השמע_קול(עצמי):
        הדפס(עצמי.שם + " מיילל: מיאו! 🐱")
    
    הגדר מידע(עצמי):
        החזר "�� " + עצמי.שם + " (" + עצמי.צבע + ", גיל: " + מחרוזת(עצמי.גיל) + ")"

# ===== יצירת אובייקטים ופולימורפיזם =====
הדפס("\n" + "=" * 40)
הדפס("חיות המחמד שלנו:")
הדפס("=" * 40)

רקס = כלב("רקס", 3, "רועה גרמני")
מיצי = חתול("מיצי", 2, "כתום")

חיות = [רקס, מיצי]

עבור חיה בתוך חיות:
    הדפס(חיה.מידע())
    חיה.השמע_קול()
    הדפס("")

# ===== מחלקה עם מתודות סטטיות =====
מחלקה מתמטיקה:
    """פעולות מתמטיות"""
    
    הגדר ריבוע(איקס):
        החזר איקס * איקס
    
    הגדר מעוקב(איקס):
        החזר איקס * איקס * איקס
    
    הגדר מקסימום(א, ב):
        אם א > ב:
            החזר א
        החזר ב

הדפס("ריבוע של 5: " + מחרוזת(מתמטיקה.ריבוע(5)))
הדפס("מעוקב של 3: " + מחרוזת(מתמטיקה.מעוקב(3)))

# ===== מחלקה - חשבון בנק =====
מחלקה חשבון_בנק:
    """ניהול חשבון בנק"""
    
    הגדר __אתחל__(עצמי, בעלים, יתרה_התחלתית):
        עצמי.בעלים = בעלים
        עצמי._יתרה = יתרה_התחלתית
        עצמי.היסטוריה = []
    
    הגדר הפקד(עצמי, סכום):
        אם סכום > 0:
            עצמי._יתרה = עצמי._יתרה + סכום
            עצמי.היסטוריה = עצמי.היסטוריה + ["הפקדה: +" + מחרוזת(סכום)]
            הדפס("✅ הופקדו " + מחרוזת(סכום) + " ש\"ח")
        אחרת:
            הדפס("❌ סכום לא תקין")
    
    הגדר משוך(עצמי, סכום):
        אם סכום > עצמי._יתרה:
            הדפס("❌ אין מספיק כסף בחשבון")
        אחרת_אם סכום > 0:
            עצמי._יתרה = עצמי._יתרה - סכום
            עצמי.היסטוריה = עצמי.היסטוריה + ["משיכה: -" + מחרוזת(סכום)]
            הדפס("✅ נמשכו " + מחרוזת(סכום) + " ש\"ח")
        אחרת:
            הדפס("❌ סכום לא תקין")
    
    הגדר יתרה(עצמי):
        החזר עצמי._יתרה
    
    הגדר הצג_היסטוריה(עצמי):
        הדפס("\n📊 היסטוריית חשבון של " + עצמי.בעלים + ":")
        עבור פעולה בתוך עצמי.היסטוריה:
            הדפס("  " + פעולה)
        הדפס("  יתרה נוכחית: " + מחרוזת(עצמי._יתרה) + " ש\"ח")

# שימוש בחשבון בנק
הדפס("\n" + "=" * 40)
הדפס("מערכת בנק:")
הדפס("=" * 40)

חשבון = חשבון_בנק("ישראל ישראלי", 1000)
חשבון.הפקד(500)
חשבון.משוך(200)
חשבון.הפקד(300)
חשבון.משוך(2000)  # יכשל - אין מספיק כסף
חשבון.הצג_היסטוריה()

