# ╔══════════════════════════════════════════════════════════════╗
# ║  דוגמה 20: מבני נתונים - מחסנית, תור וערימה                   ║
# ║  Example 20: Data Structures - Stack, Queue, Heap            ║
# ╚══════════════════════════════════════════════════════════════╝

# ===== מחסנית (Stack) - LIFO =====
מחלקה מחסנית:
    """מבנה נתונים מחסנית - אחרון נכנס ראשון יוצא"""
    
    הגדר __אתחל__(עצמי):
        עצמי.פריטים = []
    
    הגדר דחוף(עצמי, פריט):
        """הוספת פריט לראש המחסנית"""
        עצמי.פריטים = עצמי.פריטים + [פריט]
    
    הגדר שלוף(עצמי):
        """הוצאת פריט מראש המחסנית"""
        אם עצמי.ריקה():
            החזר ריק
        פריט = עצמי.פריטים[אורך(עצמי.פריטים) - 1]
        עצמי.פריטים = עצמי.פריטים[:אורך(עצמי.פריטים) - 1]
        החזר פריט
    
    הגדר הצץ(עצמי):
        """צפייה בפריט העליון"""
        אם עצמי.ריקה():
            החזר ריק
        החזר עצמי.פריטים[אורך(עצמי.פריטים) - 1]
    
    הגדר ריקה(עצמי):
        החזר אורך(עצמי.פריטים) == 0
    
    הגדר גודל(עצמי):
        החזר אורך(עצמי.פריטים)
    
    הגדר הצג(עצמי):
        אם עצמי.ריקה():
            הדפס("  [מחסנית ריקה]")
        אחרת:
            הדפס("  ┌─────────┐")
            עבור אינדקס בתוך טווח(אורך(עצמי.פריטים) - 1, -1, -1):
                הדפס("  │   " + מחרוזת(עצמי.פריטים[אינדקס]) + "   │")
            הדפס("  └─────────┘")

# ===== תור (Queue) - FIFO =====
מחלקה תור:
    """מבנה נתונים תור - ראשון נכנס ראשון יוצא"""
    
    הגדר __אתחל__(עצמי):
        עצמי.פריטים = []
    
    הגדר הכנס(עצמי, פריט):
        """הוספת פריט לסוף התור"""
        עצמי.פריטים = עצמי.פריטים + [פריט]
    
    הגדר הוצא(עצמי):
        """הוצאת פריט מתחילת התור"""
        אם עצמי.ריק():
            החזר ריק
        פריט = עצמי.פריטים[0]
        עצמי.פריטים = עצמי.פריטים[1:]
        החזר פריט
    
    הגדר ראשון(עצמי):
        """צפייה בפריט הראשון"""
        אם עצמי.ריק():
            החזר ריק
        החזר עצמי.פריטים[0]
    
    הגדר ריק(עצמי):
        החזר אורך(עצמי.פריטים) == 0
    
    הגדר גודל(עצמי):
        החזר אורך(עצמי.פריטים)
    
    הגדר הצג(עצמי):
        אם עצמי.ריק():
            הדפס("  [תור ריק]")
        אחרת:
            שורה = "  [קדימה] ◀── "
            עבור פ בתוך עצמי.פריטים:
                שורה = שורה + מחרוזת(פ) + " ← "
            שורה = שורה + "[אחורה]"
            הדפס(שורה)

# ===== רשימה מקושרת =====
מחלקה צומת:
    """צומת ברשימה מקושרת"""
    הגדר __אתחל__(עצמי, ערך):
        עצמי.ערך = ערך
        עצמי.הבא = ריק

מחלקה רשימה_מקושרת:
    """רשימה מקושרת חד-כיוונית"""
    
    הגדר __אתחל__(עצמי):
        עצמי.ראש = ריק
        עצמי.אורך = 0
    
    הגדר הוסף_לסוף(עצמי, ערך):
        צומת_חדש = צומת(ערך)
        עצמי.אורך = עצמי.אורך + 1
        
        אם עצמי.ראש == ריק:
            עצמי.ראש = צומת_חדש
            החזר
        
        נוכחי = עצמי.ראש
        כל_עוד נוכחי.הבא != ריק:
            נוכחי = נוכחי.הבא
        נוכחי.הבא = צומת_חדש
    
    הגדר הוסף_להתחלה(עצמי, ערך):
        צומת_חדש = צומת(ערך)
        צומת_חדש.הבא = עצמי.ראש
        עצמי.ראש = צומת_חדש
        עצמי.אורך = עצמי.אורך + 1
    
    הגדר מצא(עצמי, ערך):
        נוכחי = עצמי.ראש
        אינדקס = 0
        כל_עוד נוכחי != ריק:
            אם נוכחי.ערך == ערך:
                החזר אינדקס
            נוכחי = נוכחי.הבא
            אינדקס = אינדקס + 1
        החזר -1
    
    הגדר הצג(עצמי):
        אם עצמי.ראש == ריק:
            הדפס("  [רשימה ריקה]")
            החזר
        
        שורה = "  [ראש] → "
        נוכחי = עצמי.ראש
        כל_עוד נוכחי != ריק:
            שורה = שורה + "[" + מחרוזת(נוכחי.ערך) + "]"
            אם נוכחי.הבא != ריק:
                שורה = שורה + " → "
            נוכחי = נוכחי.הבא
        שורה = שורה + " → [סוף]"
        הדפס(שורה)

# ===== הדגמות =====
הדפס("╔══════════════════════════════════════════╗")
הדפס("║     🏗️  מבני נתונים בנחשון              ║")
הדפס("╚══════════════════════════════════════════╝")

# --- הדגמת מחסנית ---
הדפס("\n📚 הדגמת מחסנית (LIFO):")
הדפס("═" * 40)

ס = מחסנית()
הדפס("\nדוחף: 1, 2, 3")
ס.דחוף(1)
ס.דחוף(2)
ס.דחוף(3)
ס.הצג()

הדפס("\nשולף פריט: " + מחרוזת(ס.שלוף()))
ס.הצג()

הדפס("\nדוחף: 4, 5")
ס.דחוף(4)
ס.דחוף(5)
ס.הצג()

# --- הדגמת תור ---
הדפס("\n\n📬 הדגמת תור (FIFO):")
הדפס("═" * 40)

ת = תור()
הדפס("\nמכניס: א, ב, ג")
ת.הכנס("א")
ת.הכנס("ב")
ת.הכנס("ג")
ת.הצג()

הדפס("\nמוציא פריט: " + מחרוזת(ת.הוצא()))
ת.הצג()

הדפס("\nמכניס: ד, ה")
ת.הכנס("ד")
ת.הכנס("ה")
ת.הצג()

# --- הדגמת רשימה מקושרת ---
הדפס("\n\n🔗 הדגמת רשימה מקושרת:")
הדפס("═" * 40)

ר = רשימה_מקושרת()
הדפס("\nמוסיף לסוף: 10, 20, 30")
ר.הוסף_לסוף(10)
ר.הוסף_לסוף(20)
ר.הוסף_לסוף(30)
ר.הצג()

הדפס("\nמוסיף להתחלה: 5")
ר.הוסף_להתחלה(5)
ר.הצג()

הדפס("\nמחפש 20: אינדקס " + מחרוזת(ר.מצא(20)))
הדפס("מחפש 100: אינדקס " + מחרוזת(ר.מצא(100)))
הדפס("אורך הרשימה: " + מחרוזת(ר.אורך))

הדפס("\n✨ סיום הדגמת מבני נתונים!")

