# ╔══════════════════════════════════════════════════════════════╗
# ║  דוגמה 28: מיני פרויקטים                                     ║
# ║  Example 28: Mini Projects                                   ║
# ╚══════════════════════════════════════════════════════════════╝

הדפס("╔══════════════════════════════════════════╗")
הדפס("║  🎮 מיני פרויקטים                        ║")
הדפס("╚══════════════════════════════════════════╝")

# ═════════════════════════════════════════════════════════════════
# פרויקט 1: מנהל משימות (To-Do List)
# ═════════════════════════════════════════════════════════════════
הדפס("\n🗒️ פרויקט 1: מנהל משימות")
הדפס("═" * 40)


מחלקה משימה:
    הגדר __אתחל__(עצמי, כותרת, עדיפות):
        עצמי.כותרת = כותרת
        עצמי.עדיפות = עדיפות
        עצמי.הושלמה = שקר
        עצמי.תת_משימות = []
    
    הגדר סמן_כהושלמה(עצמי):
        עצמי.הושלמה = אמת
        # סמן גם תת-משימות
        עבור תת בתוך עצמי.תת_משימות:
            תת.הושלמה = אמת
    
    הגדר הוסף_תת_משימה(עצמי, כותרת):
        תת = משימה(כותרת, עצמי.עדיפות)
        עצמי.תת_משימות = עצמי.תת_משימות + [תת]
        החזר תת
    
    הגדר אחוז_השלמה(עצמי):
        אם אורך(עצמי.תת_משימות) == 0:
            אם עצמי.הושלמה:
                החזר 100
            החזר 0
        
        הושלמו = 0
        עבור תת בתוך עצמי.תת_משימות:
            אם תת.הושלמה:
                הושלמו = הושלמו + 1
        החזר (הושלמו * 100) // אורך(עצמי.תת_משימות)
    
    הגדר __מחרוזת__(עצמי):
        סימן = "✅" אם עצמי.הושלמה אחרת "⬜"
        כוכביות = "⭐" * עצמי.עדיפות
        החזר סימן + " " + עצמי.כותרת + " " + כוכביות

מחלקה מנהל_משימות:
    הגדר __אתחל__(עצמי):
        עצמי.משימות = []
    
    הגדר הוסף(עצמי, כותרת, עדיפות):
        משימה_חדשה = משימה(כותרת, עדיפות)
        עצמי.משימות = עצמי.משימות + [משימה_חדשה]
        החזר משימה_חדשה
    
    הגדר קבל_לפי_עדיפות(עצמי, עדיפות):
        תוצאות = []
        עבור מ בתוך עצמי.משימות:
            אם מ.עדיפות == עדיפות:
                תוצאות = תוצאות + [מ]
        החזר תוצאות
    
    הגדר קבל_לא_הושלמו(עצמי):
        תוצאות = []
        עבור מ בתוך עצמי.משימות:
            אם לא מ.הושלמה:
                תוצאות = תוצאות + [מ]
        החזר תוצאות
    
    הגדר הצג(עצמי):
        עבור מ בתוך עצמי.משימות:
            הדפס("  " + מחרוזת(מ))
            עבור תת בתוך מ.תת_משימות:
                הדפס("    └─ " + מחרוזת(תת))

# הדגמה
מנהל = מנהל_משימות()

משימה1 = מנהל.הוסף("ללמוד נחשון", 3)
משימה1.הוסף_תת_משימה("קרוא תיעוד")
משימה1.הוסף_תת_משימה("לכתוב קוד")
משימה1.תת_משימות[0].סמן_כהושלמה()

משימה2 = מנהל.הוסף("קניות", 1)
משימה2.הוסף_תת_משימה("חלב")
משימה2.הוסף_תת_משימה("לחם")

משימה3 = מנהל.הוסף("פגישה", 2)
משימה3.סמן_כהושלמה()

הדפס("רשימת משימות:")
מנהל.הצג()

הדפס("\nאחוז השלמה 'ללמוד נחשון': " + מחרוזת(משימה1.אחוז_השלמה()) + "%")

# ═════════════════════════════════════════════════════════════════
# פרויקט 2: מערכת ציונים
# ═════════════════════════════════════════════════════════════════
הדפס("\n📊 פרויקט 2: מערכת ציונים")
הדפס("═" * 40)

מחלקה תלמיד:
    הגדר __אתחל__(עצמי, שם, מספר_זהות):
        עצמי.שם = שם
        עצמי.מספר_זהות = מספר_זהות
        עצמי.ציונים = {}  # מקצוע -> רשימת ציונים
    
    הגדר הוסף_ציון(עצמי, מקצוע, ציון):
        אם מקצוע לא_בתוך עצמי.ציונים:
            עצמי.ציונים[מקצוע] = []
        עצמי.ציונים[מקצוע] = עצמי.ציונים[מקצוע] + [ציון]
    
    הגדר ממוצע_במקצוע(עצמי, מקצוע):
        אם מקצוע לא_בתוך עצמי.ציונים:
            החזר 0
        ציוני_מקצוע = עצמי.ציונים[מקצוע]
        אם אורך(ציוני_מקצוע) == 0:
            החזר 0
        סכום = 0
        עבור צ בתוך ציוני_מקצוע:
            סכום = סכום + צ
        החזר סכום / אורך(ציוני_מקצוע)
    
    הגדר ממוצע_כללי(עצמי):
        סה_כ = 0
        מספר_מקצועות = 0
        עבור מקצוע בתוך עצמי.ציונים:
            סה_כ = סה_כ + עצמי.ממוצע_במקצוע(מקצוע)
            מספר_מקצועות = מספר_מקצועות + 1
        אם מספר_מקצועות == 0:
            החזר 0
        החזר סה_כ / מספר_מקצועות
    
    הגדר דרגה(עצמי):
        ממוצע = עצמי.ממוצע_כללי()
        אם ממוצע >= 90:
            החזר "מצטיין 🌟"
        אחרת_אם ממוצע >= 80:
            החזר "טוב מאוד 👍"
        אחרת_אם ממוצע >= 70:
            החזר "טוב"
        אחרת_אם ממוצע >= 60:
            החזר "מספיק"
        אחרת:
            החזר "נכשל ❌"

מחלקה כיתה:
    הגדר __אתחל__(עצמי, שם):
        עצמי.שם = שם
        עצמי.תלמידים = []
    
    הגדר הוסף_תלמיד(עצמי, תלמיד):
        עצמי.תלמידים = עצמי.תלמידים + [תלמיד]
    
    הגדר ממוצע_כיתתי(עצמי, מקצוע):
        סכום = 0
        מספר = 0
        עבור ת בתוך עצמי.תלמידים:
            ממוצע = ת.ממוצע_במקצוע(מקצוע)
            אם ממוצע > 0:
                סכום = סכום + ממוצע
                מספר = מספר + 1
        אם מספר == 0:
            החזר 0
        החזר סכום / מספר
    
    הגדר מצטיינים(עצמי):
        תוצאות = []
        עבור ת בתוך עצמי.תלמידים:
            אם ת.ממוצע_כללי() >= 90:
                תוצאות = תוצאות + [ת]
        החזר תוצאות
    
    הגדר הצג_גליון(עצמי):
        הדפס("  ╔════════════════════════════════════════╗")
        הדפס("  ║  גליון ציונים - " + עצמי.שם + "║")
        הדפס("  ╚════════════════════════════════════════╝")

        עבור ת בתוך עצמי.תלמידים:
            הדפס("  " + ת.שם + " - " + ת.דרגה())
            עבור מקצוע בתוך ת.ציונים:
                ממוצע = ת.ממוצע_במקצוע(מקצוע)
                הדפס("    " + מקצוע + ": " + מחרוזת(int(ממוצע)))
            הדפס("    ממוצע כללי: " + מחרוזת(int(ת.ממוצע_כללי())))
            הדפס("")

# הדגמה
כיתה_א = כיתה("י\"ב-1")

דני = תלמיד("דני כהן", "123456")
דני.הוסף_ציון("מתמטיקה", 95)
דני.הוסף_ציון("מתמטיקה", 92)
דני.הוסף_ציון("אנגלית", 88)
דני.הוסף_ציון("היסטוריה", 90)

שרה = תלמיד("שרה לוי", "234567")
שרה.הוסף_ציון("מתמטיקה", 78)
שרה.הוסף_ציון("אנגלית", 92)
שרה.הוסף_ציון("היסטוריה", 85)

כיתה_א.הוסף_תלמיד(דני)
כיתה_א.הוסף_תלמיד(שרה)

כיתה_א.הצג_גליון()

# ═════════════════════════════════════════════════════════════════
# פרויקט 3: מחשבון המרות
# ═════════════════════════════════════════════════════════════════
הדפס("\n🔄 פרויקט 3: מחשבון המרות")
הדפס("═" * 40)

מחלקה ממיר:
    """ממיר יחידות מדידה"""
    
    # המרות אורך (למטרים)
    אורך = {
        "מטר": 1,
        "קילומטר": 1000,
        "סנטימטר": 0.01,
        "מילימטר": 0.001,
        "מייל": 1609.34,
        "יארד": 0.9144,
        "רגל": 0.3048,
        "אינץ": 0.0254
    }
    
    # המרות משקל (לקילוגרמים)
    משקל = {
        "קילוגרם": 1,
        "גרם": 0.001,
        "טון": 1000,
        "פאונד": 0.453592,
        "אונקיה": 0.0283495
    }
    
    # המרות נפח (לליטרים)
    נפח = {
        "ליטר": 1,
        "מיליליטר": 0.001,
        "גלון": 3.78541,
        "כוס": 0.236588
    }
    
    הגדר המר_אורך(מקור, יעד, ערך):
        אם מקור לא_בתוך ממיר.אורך או יעד לא_בתוך ממיר.אורך:
            החזר ריק
        במטרים = ערך * ממיר.אורך[מקור]
        החזר במטרים / ממיר.אורך[יעד]
    
    הגדר המר_משקל(מקור, יעד, ערך):
        אם מקור לא_בתוך ממיר.משקל או יעד לא_בתוך ממיר.משקל:
            החזר ריק
        בקילו = ערך * ממיר.משקל[מקור]
        החזר בקילו / ממיר.משקל[יעד]
    
    הגדר המר_טמפרטורה(מקור, יעד, ערך):
        # המר לצלזיוס תחילה
        אם מקור == "צלזיוס":
            צלזיוס = ערך
        אחרת_אם מקור == "פרנהייט":
            צלזיוס = (ערך - 32) * 5 / 9
        אחרת_אם מקור == "קלווין":
            צלזיוס = ערך - 273.15
        אחרת:
            החזר ריק
        
        # המר מצלזיוס ליעד
        אם יעד == "צלזיוס":
            החזר צלזיוס
        אחרת_אם יעד == "פרנהייט":
            החזר צלזיוס * 9 / 5 + 32
        אחרת_אם יעד == "קלווין":
            החזר צלזיוס + 273.15
        החזר ריק

# הדגמה
הדפס("המרות אורך:")
הדפס("  100 מטר = " + מחרוזת(ממיר.המר_אורך("מטר", "קילומטר", 100)) + " קילומטר")
הדפס("  1 מייל = " + מחרוזת(int(ממיר.המר_אורך("מייל", "מטר", 1))) + " מטר")
הדפס("  12 אינץ = " + מחרוזת(round(ממיר.המר_אורך("אינץ", "סנטימטר", 12), 2)) + " סנטימטר")

הדפס("\nהמרות משקל:")
הדפס("  1 קילוגרם = " + מחרוזת(round(ממיר.המר_משקל("קילוגרם", "פאונד", 1), 2)) + " פאונד")
הדפס("  100 גרם = " + מחרוזת(round(ממיר.המר_משקל("גרם", "אונקיה", 100), 2)) + " אונקיה")

הדפס("\nהמרות טמפרטורה:")
הדפס("  0°C = " + מחרוזת(ממיר.המר_טמפרטורה("צלזיוס", "פרנהייט", 0)) + "°")
הדפס("  100°C = " + מחרוזת(ממיר.המר_טמפרטורה("צלזיוס", "קלווין", 100)) + "°K")
הדפס("  98.6°F = " + מחרוזת(round(ממיר.המר_טמפרטורה("פרנהייט", "צלזיוס", 98.6), 1)) + "°C")

# ═════════════════════════════════════════════════════════════════
# פרויקט 4: מערכת הזמנות פשוטה
# ═════════════════════════════════════════════════════════════════
הדפס("\n🛒 פרויקט 4: מערכת הזמנות")
הדפס("═" * 40)

מחלקה מוצר:
    הגדר __אתחל__(עצמי, קוד, שם, מחיר, מלאי):
        עצמי.קוד = קוד
        עצמי.שם = שם
        עצמי.מחיר = מחיר
        עצמי.מלאי = מלאי

מחלקה פריט_בעגלה:
    הגדר __אתחל__(עצמי, מוצר, כמות):
        עצמי.מוצר = מוצר
        עצמי.כמות = כמות
    
    הגדר סכום(עצמי):
        החזר עצמי.מוצר.מחיר * עצמי.כמות

מחלקה עגלת_קניות:
    הגדר __אתחל__(עצמי):
        עצמי.פריטים = []
        עצמי.הנחה = 0
    
    הגדר הוסף(עצמי, מוצר, כמות):
        אם מוצר.מלאי < כמות:
            הדפס("  ⚠️ אין מספיק מלאי!")
            החזר שקר
        
        # בדיקה אם המוצר כבר בעגלה
        עבור פריט בתוך עצמי.פריטים:
            אם פריט.מוצר.קוד == מוצר.קוד:
                פריט.כמות = פריט.כמות + כמות
                החזר אמת
        
        עצמי.פריטים = עצמי.פריטים + [פריט_בעגלה(מוצר, כמות)]
        החזר אמת
    
    הגדר הסר(עצמי, קוד_מוצר):
        פריטים_חדשים = []
        עבור פריט בתוך עצמי.פריטים:
            אם פריט.מוצר.קוד != קוד_מוצר:
                פריטים_חדשים = פריטים_חדשים + [פריט]
        עצמי.פריטים = פריטים_חדשים
    
    הגדר סכום_ביניים(עצמי):
        סכום = 0
        עבור פריט בתוך עצמי.פריטים:
            סכום = סכום + פריט.סכום()
        החזר סכום
    
    הגדר החל_הנחה(עצמי, אחוז):
        עצמי.הנחה = אחוז
    
    הגדר סכום_סופי(עצמי):
        ביניים = עצמי.סכום_ביניים()
        הנחה_בשקלים = ביניים * עצמי.הנחה / 100
        החזר ביניים - הנחה_בשקלים
      
    הגדר הצג(עצמי):
        הדפס("  ╔════════════════════════════════════╗")
        הדפס("  ║           עגלת קניות 🛒            ║")
        הדפס("  ╚════════════════════════════════════╝")
        
        עבור פריט בתוך עצמי.פריטים:
            שורה = "  " + פריט.מוצר.שם + " x" + מחרוזת(פריט.כמות)
            שורה = שורה + " = " + מחרוזת(פריט.סכום()) + "₪"
            הדפס(שורה)
        
        הדפס("  ─────────────────────────────────────")
        הדפס("  סכום ביניים: " + מחרוזת(עצמי.סכום_ביניים()) + "₪")
        אם עצמי.הנחה > 0:
            הדפס("  הנחה: " + מחרוזת(עצמי.הנחה) + "%")
        הדפס("  סה\"כ לתשלום: " + מחרוזת(int(עצמי.סכום_סופי())) + "₪")

# הדגמה
מוצרים = [
    מוצר("001", "חלב", 7, 50),
    מוצר("002", "לחם", 12, 30),
    מוצר("003", "גבינה", 25, 20),
    מוצר("004", "ביצים", 28, 40)
]

עגלה = עגלת_קניות()
עגלה.הוסף(מוצרים[0], 2)  # 2 חלב
עגלה.הוסף(מוצרים[1], 1)  # 1 לחם
עגלה.הוסף(מוצרים[2], 1)  # 1 גבינה
עגלה.הוסף(מוצרים[3], 1)  # 1 ביצים

עגלה.החל_הנחה(10)  # 10% הנחה
עגלה.הצג()

# ═════════════════════════════════════════════════════════════════
# פרויקט 5: משחק טריוויה
# ═════════════════════════════════════════════════════════════════
הדפס("\n❓ פרויקט 5: משחק טריוויה")
הדפס("═" * 40)

מחלקה שאלה:
    הגדר __אתחל__(עצמי, טקסט, תשובות, נכונה):
        עצמי.טקסט = טקסט
        עצמי.תשובות = תשובות
        עצמי.נכונה = נכונה  # אינדקס התשובה הנכונה
    
    הגדר בדוק(עצמי, תשובה):
        החזר תשובה == עצמי.נכונה
    
    הגדר הצג(עצמי):
        הדפס("  " + עצמי.טקסט)
        מספר = 1
        עבור ת בתוך עצמי.תשובות:
            הדפס("    " + מחרוזת(מספר) + ". " + ת)
            מספר = מספר + 1

מחלקה משחק_טריוויה:
    הגדר __אתחל__(עצמי, שם):
        עצמי.שם = שם
        עצמי.שאלות = []
        עצמי.ניקוד = 0
        עצמי.שאלה_נוכחית = 0
    
    הגדר הוסף_שאלה(עצמי, שאלה):
        עצמי.שאלות = עצמי.שאלות + [שאלה]
    
    הגדר הצג_שאלה_נוכחית(עצמי):
        אם עצמי.שאלה_נוכחית >= אורך(עצמי.שאלות):
            החזר שקר
        
        הדפס("\n  שאלה " + מחרוזת(עצמי.שאלה_נוכחית + 1) + ":")
        עצמי.שאלות[עצמי.שאלה_נוכחית].הצג()
        החזר אמת
    
    הגדר ענה(עצמי, תשובה):
        שאלה = עצמי.שאלות[עצמי.שאלה_נוכחית]
        אם שאלה.בדוק(תשובה):
            עצמי.ניקוד = עצמי.ניקוד + 10
            הדפס("  ✅ נכון! +10 נקודות")
        אחרת:
            הדפס("  ❌ לא נכון. התשובה הנכונה: " + מחרוזת(שאלה.נכונה + 1))
        
        עצמי.שאלה_נוכחית = עצמי.שאלה_נוכחית + 1
    
    הגדר סיום(עצמי):
        הדפס("\n  🏆 המשחק הסתיים!")
        הדפס("  ניקוד סופי: " + מחרוזת(עצמי.ניקוד))
        מקסימום = אורך(עצמי.שאלות) * 10
        אחוז = (עצמי.ניקוד * 100) // מקסימום
        הדפס("  אחוז הצלחה: " + מחרוזת(אחוז) + "%")

# הדגמה
משחק = משחק_טריוויה("טריוויה ישראלית")

משחק.הוסף_שאלה(שאלה(
    "מהי בירת ישראל?",
    ["תל אביב", "חיפה", "ירושלים", "באר שבע"],
    2  # ירושלים
))

משחק.הוסף_שאלה(שאלה(
    "באיזו שנה קמה מדינת ישראל?",
    ["1945", "1948", "1950", "1967"],
    1  # 1948
))

משחק.הוסף_שאלה(שאלה(
    "מהו הים הכי נמוך בעולם?",
    ["ים סוף", "ים התיכון", "הכנרת", "ים המלח"],
    3  # ים המלח
))

# סימולציה של משחק (תשובות קבועות להדגמה)
תשובות_שחקן = [2, 1, 3]  # ירושלים, 1948, ים המלח - כולן נכונות!

הדפס("מתחילים משחק טריוויה!")
עבור תשובה בתוך תשובות_שחקן:
    אם משחק.הצג_שאלה_נוכחית():
        משחק.ענה(תשובה)

משחק.סיום()

הדפס("\n✨ סיום דוגמת מיני פרויקטים!")

